<!DOCTYPE html>
<html lang="en-us">
<head>
	<meta charset="UTF-8">
	<title>Web messaging demo: Channel Messaging</title>
	<link rel="stylesheet" href="webmessaging.css" media="screen">
<script>
function messageHandler(evt) {
    if (evt.origin == 'https://dev.opera.com') {
	if (evt.ports.length > 0) {
	    // transfer the port to our other document.
	    window.frames[1].postMessage('portopen',
                                         'https://dev.opera.com',
                                         evt.ports);
	}
    }
}

window.addEventListener('message', messageHandler, false);

</script>
</head>
<body>

	<h1>Web Messaging Demo: Channel messaging and ports</h1>


	<iframe src="channelmessaging-iframe-a.html"></iframe>
	<iframe src="channelmessaging-iframe-b.html"></iframe>

<footer>
<p><a rel="license" href="https://creativecommons.org/licenses/by/3.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/3.0/88x31.png" /></a><br />This <span xmlns:dct="http://purl.org/dc/terms/" href="http://purl.org/dc/dcmitype/InteractiveResource" rel="dct:type">work</span> is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution 3.0 Unported License</a>.</p>

</footer>

</body>
</html>
